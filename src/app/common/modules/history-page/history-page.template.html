<div class="page-layout carded fullwidth" fusePerfectScrollbar>

  <!-- TOP BACKGROUND -->
  <div class="top-bg mat-accent-bg"></div>
  <!-- / TOP BACKGROUND -->

  <!-- CENTER -->
  <div class="center">

    <!-- HEADER -->
    <div class="header white-fg" fxLayout="row" fxLayoutAlign="space-between center">
      <!-- APP TITLE -->
      <div fxLayout="row" fxLayoutAlign="start center">

        <button class="mr-0 mr-sm-16" mat-icon-button (click)="back()">
          <mat-icon>arrow_back</mat-icon>
        </button>

        <div fxLayout="column" fxLayoutAlign="start start">
          <div fxLayout="row" fxLayoutAlign="start center">
            <mat-icon class="mr-8">history</mat-icon>
            <span class="h2">{{'HISTORY.TITLE' | translate}}</span>
          </div>
          <div class="subtitle secondary-text">
            <span>{{(historyTitle || historyName) | translate}}</span>
          </div>
        </div>
      </div>
      <!-- / APP TITLE -->
    </div>
    <!-- / HEADER -->

    <!-- CONTENT -->
    <div class="content mat-white-bg mat-elevation-z4">
      <mat-table #table [dataSource]="dataSource" fusePerfectScrollbar>

        <ng-container cdkColumnDef="field">
          <mat-header-cell *cdkHeaderCellDef>{{'HISTORY.FIELD' | translate}}</mat-header-cell>
          <mat-cell *cdkCellDef="let row">
            <div class="action-container">
              <div class="action-header">
                <mat-icon class="mr-4">person</mat-icon>
                <span class="mr-4 actionActor">{{row.actionActor}}</span>
                <span class="mr-4">{{row.actionDescription}} -</span>
                <span class="mr-4 secondary-text text-italic">{{row.dateLog | date: 'dd/MMM/yyyy hh:mm:ss' }}</span>
                <span class="">{{row.historyRemark}}</span>
              </div>
              <div class="action-body ml-28" *ngFor="let prop of row.fields"> {{prop.field}}</div>
            </div>
          </mat-cell>
        </ng-container>

        <ng-container cdkColumnDef="originalValue">
          <mat-header-cell *cdkHeaderCellDef>{{'HISTORY.ORIGINALVALUE' | translate}}</mat-header-cell>
          <mat-cell *cdkCellDef="let row">
            <div class="action-container">
              <div class="action-header"></div>
              <div class="action-body" *ngFor="let prop of row.fields"> {{prop.origin}}</div>
            </div>
          </mat-cell>
        </ng-container>

        <ng-container cdkColumnDef="newValue">
          <mat-header-cell *cdkHeaderCellDef>{{'HISTORY.NEWVALUE' | translate}}</mat-header-cell>
          <mat-cell *cdkCellDef="let row">
            <div class="action-container">
              <div class="action-header"></div>
              <div class="action-body" *ngFor="let prop of row.fields"> {{prop.new}}</div>
            </div>
          </mat-cell>
        </ng-container>

        <mat-header-row *cdkHeaderRowDef="displayedColumns"></mat-header-row>

        <mat-row *cdkRowDef="let row; columns: displayedColumns;"></mat-row>

      </mat-table>

    </div>
    <!-- / CONTENT -->

  </div>
  <!-- / CENTER -->
</div>
